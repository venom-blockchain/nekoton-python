import{_ as s,v as a,b as e,R as n}from"./chunks/framework.f247d2cd.js";const h=JSON.parse('{"title":"Working with Messages","description":"","frontmatter":{"outline":[2,3]},"headers":[],"relativePath":"guides/working-with-messages.md","filePath":"src/pages/guides/working-with-messages.md"}'),l={name:"guides/working-with-messages.md"},o=n(`<h1 id="working-with-messages" tabindex="-1">Working with Messages <a class="header-anchor" href="#working-with-messages" aria-label="Permalink to &quot;Working with Messages&quot;">​</a></h1><p>The <code>nekoton-python</code> library provides a robust set of tools to work with messages in the TVM blockchain. Messages are crucial for communication between smart contracts or between smart contracts and external applications. This guide will walk you through the different types of messages and how to work with them.</p><h2 id="message-types" tabindex="-1">Message Types <a class="header-anchor" href="#message-types" aria-label="Permalink to &quot;Message Types&quot;">​</a></h2><p>In TVM blockchains, there are three types of messages:</p><ul><li>External Inbound Messages</li><li>Internal Messages</li><li>External Outbound Messages</li></ul><p>These message types are represented by the <code>MessageType</code> enum in <code>nekoton-python</code>.</p><h2 id="initialization-methods" tabindex="-1">Initialization Methods <a class="header-anchor" href="#initialization-methods" aria-label="Permalink to &quot;Initialization Methods&quot;">​</a></h2><p>The <code>Message</code> class offers two static methods that allow you to manually initialize a <code>Message</code> object. You can either use raw bytes or a cell to create a new instance of a <code>Message</code>.</p><h3 id="initialize-from-raw-bytes" tabindex="-1">Initialize from Raw Bytes <a class="header-anchor" href="#initialize-from-raw-bytes" aria-label="Permalink to &quot;Initialize from Raw Bytes&quot;">​</a></h3><p>To create a <code>Message</code> object from raw bytes, use the <code>from_bytes</code> method. The bytes should contain the BOC (Bag-of-Cells) data.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">message_raw_bytes </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">b</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\\xb5\\xee\\x9c</span><span style="color:#C3E88D;">r</span><span style="color:#A6ACCD;">\\x01\\x01\\x01\\x01\\x00\\x81\\x00\\x00\\xfd\\x88\\x00\\r\\x88\\t</span><span style="color:#C3E88D;">3</span><span style="color:#A6ACCD;">\\x17</span><span style="color:#C3E88D;">iM</span><span style="color:#A6ACCD;">\\xeb\\x9f\\xc8\\xcb</span><span style="color:#C3E88D;">&#39;&lt;|j</span><span style="color:#A6ACCD;">\\xc5\\xda\\xae</span><span style="color:#C3E88D;">|O</span><span style="color:#A6ACCD;">\\xef</span><span style="color:#C3E88D;"> </span><span style="color:#A6ACCD;">\\xc6\\xab</span><span style="color:#C3E88D;">cS</span><span style="color:#A6ACCD;">\\xc3\\x9e\\xc3\\xeb</span><span style="color:#C3E88D;">t</span><span style="color:#A6ACCD;">\\\\\\x05</span><span style="color:#C3E88D;">ag</span><span style="color:#A6ACCD;">\\x92\\xed\\xdc\\xbe</span><span style="color:#C3E88D;">&#39;(</span><span style="color:#A6ACCD;">\\x8a</span><span style="color:#C3E88D;">5</span><span style="color:#A6ACCD;">\\xbf</span><span style="color:#C3E88D;">I</span><span style="color:#A6ACCD;">\\xc5</span><span style="color:#C3E88D;">/</span><span style="color:#A6ACCD;">\\x18\\x8a\\xfa\\x0b</span><span style="color:#C3E88D;">9y_+40</span><span style="color:#A6ACCD;">\\xd3\\xe3\\xbc\\xf2\\xd1\\xe6</span><span style="color:#C3E88D;">W</span><span style="color:#A6ACCD;">\\xec\\x98</span><span style="color:#C3E88D;">~</span><span style="color:#A6ACCD;">\\xca\\xa6</span><span style="color:#C3E88D;">1aB</span><span style="color:#A6ACCD;">\\x12\\x12</span><span style="color:#C3E88D;">sS</span><span style="color:#A6ACCD;">\\x8e</span><span style="color:#C3E88D;">7</span><span style="color:#A6ACCD;">\\xed\\xcd\\\\\\xb2\\xef</span><span style="color:#C3E88D;">X</span><span style="color:#A6ACCD;">\\x90\\xbc\\x9c\\xf3</span><span style="color:#C3E88D;"> mk;</span><span style="color:#A6ACCD;">\\xa2\\xbf\\x84</span><span style="color:#C3E88D;">T</span><span style="color:#A6ACCD;">\\x14\\x00\\x00\\x06</span><span style="color:#C3E88D;">&#39;</span><span style="color:#A6ACCD;">\\xc2</span><span style="color:#C3E88D;">Fz</span><span style="color:#A6ACCD;">\\xf1\\x00\\x08\\xbd\\xc8\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\xaa</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Initialize the message from the raw bytes</span></span>
<span class="line"><span style="color:#A6ACCD;">message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">from_bytes</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">message_raw_bytes</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">message</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="result" tabindex="-1">Result: <a class="header-anchor" href="#result" aria-label="Permalink to &quot;Result:&quot;">​</a></h4><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Message </span><span style="color:#82AAFF;">hash</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dcbfbbce5aecdb9a486b8009e5f193f8bc7006455643e7ed83044afabe5cb8f2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ExternalIn</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h3 id="initialize-from-a-cell" tabindex="-1">Initialize from a Cell <a class="header-anchor" href="#initialize-from-a-cell" aria-label="Permalink to &quot;Initialize from a Cell&quot;">​</a></h3><p>To create a <code>Message</code> object from a <code>Cell</code>, use the <code>from_cell</code> method. The cell should be the root message cell.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">message_base64_boc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">te6ccgEBAQEAgQAA/YgADYgJMxdpTeufyMsnPHxqxdqufE/vIMarY1PDnsPrdFwFYWeS7dy+JyiKNb9JxS8YivoLOXlfKzQw0+O88tHmV+yYfsqmMWFCEhJzU4437c1csu9YkLyc8yBtazuiv4RUFAAABifCRnrxAAi9yAAAAAAAAAAAAAAAAAAAAKo=</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Decode the message cell</span></span>
<span class="line"><span style="color:#A6ACCD;">message_cell </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> nt</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">Cell</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">decode</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">message_base64_boc</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Initialize the message from the cell</span></span>
<span class="line"><span style="color:#A6ACCD;">message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">from_cell</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">message_cell</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">message</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="result-1" tabindex="-1">Result: <a class="header-anchor" href="#result-1" aria-label="Permalink to &quot;Result:&quot;">​</a></h4><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Message </span><span style="color:#82AAFF;">hash</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dcbfbbce5aecdb9a486b8009e5f193f8bc7006455643e7ed83044afabe5cb8f2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ExternalIn</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h2 id="decoding-messages" tabindex="-1">Decoding Messages <a class="header-anchor" href="#decoding-messages" aria-label="Permalink to &quot;Decoding Messages&quot;">​</a></h2><p>The <code>Message</code> class offers a static method for decoding a <code>Message</code> object from an encoded BOC string. The method allows you to specify the encoding type, which can be either <code>base64</code> (default) or <code>hex</code>.</p><h3 id="from-an-encoded-boc-string" tabindex="-1">From an Encoded BOC String <a class="header-anchor" href="#from-an-encoded-boc-string" aria-label="Permalink to &quot;From an Encoded BOC String&quot;">​</a></h3><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Decode the message from an encoded BOC string</span></span>
<span class="line"><span style="color:#A6ACCD;">message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">decode</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">encoded_boc_string</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;font-style:italic;">encoding</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">base64</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">message</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="result-2" tabindex="-1">Result: <a class="header-anchor" href="#result-2" aria-label="Permalink to &quot;Result:&quot;">​</a></h4><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Message </span><span style="color:#82AAFF;">hash</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dcbfbbce5aecdb9a486b8009e5f193f8bc7006455643e7ed83044afabe5cb8f2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ExternalIn</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This method is particularly useful when the encoded BOC string is obtained from an external source, such as a blockchain explorer. It is more appropriate to use this method in such cases, rather than when you have created a cell during the initialization step.</p></div><h2 id="encoding-messages" tabindex="-1">Encoding Messages <a class="header-anchor" href="#encoding-messages" aria-label="Permalink to &quot;Encoding Messages&quot;">​</a></h2><p>The <code>Message</code> class provides methods for encoding a <code>Message</code> object into different formats: a string, bytes, or a cell.</p><h3 id="to-a-string" tabindex="-1">To a String <a class="header-anchor" href="#to-a-string" aria-label="Permalink to &quot;To a String&quot;">​</a></h3><p>To encode a <code>Message</code> object into a string, use the <code>encode</code> method.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Encode the message to a string</span></span>
<span class="line"><span style="color:#A6ACCD;">encoded_message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">encode</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">base64</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">encoded_message</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="result-3" tabindex="-1">Result: <a class="header-anchor" href="#result-3" aria-label="Permalink to &quot;Result:&quot;">​</a></h4><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">te6ccgEBAQEAgQAA</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">YgADYgJMxdpTeufyMsnPHxqxdqufE</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">vIMarY1PDnsPrdFwFYWeS7dy</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">JyiKNb9JxS8YivoLOXlfKzQw0</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">O88tHmV</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">yYfsqmMWFCEhJzU4437c1csu9YkLyc8yBtazuiv4RUFAAABifCRnrxAAi9yAAAAAAAAAAAAAAAAAAAAKo</span><span style="color:#89DDFF;">=</span></span></code></pre></div><h3 id="to-bytes" tabindex="-1">To Bytes <a class="header-anchor" href="#to-bytes" aria-label="Permalink to &quot;To Bytes&quot;">​</a></h3><p>To encode a <code>Message</code> object into bytes, use the <code>to_bytes</code> method.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Encode the message to bytes</span></span>
<span class="line"><span style="color:#A6ACCD;">encoded_message_bytes </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">to_bytes</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">encoded_message_bytes</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="result-4" tabindex="-1">Result: <a class="header-anchor" href="#result-4" aria-label="Permalink to &quot;Result:&quot;">​</a></h4><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">b</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\\xb5\\xee\\x9c</span><span style="color:#C3E88D;">r</span><span style="color:#A6ACCD;">\\x01\\x01\\x01\\x01\\x00\\x81\\x00\\x00\\xfd\\x88\\x00\\r\\x88\\t</span><span style="color:#C3E88D;">3</span><span style="color:#A6ACCD;">\\x17</span><span style="color:#C3E88D;">iM</span><span style="color:#A6ACCD;">\\xeb\\x9f\\xc8\\xcb</span><span style="color:#C3E88D;">&#39;&lt;|j</span><span style="color:#A6ACCD;">\\xc5\\xda\\xae</span><span style="color:#C3E88D;">|O</span><span style="color:#A6ACCD;">\\xef</span><span style="color:#C3E88D;"> </span><span style="color:#A6ACCD;">\\xc6\\xab</span><span style="color:#C3E88D;">cS</span><span style="color:#A6ACCD;">\\xc3\\x9e\\xc3\\xeb</span><span style="color:#C3E88D;">t</span><span style="color:#A6ACCD;">\\\\\\x05</span><span style="color:#C3E88D;">ag</span><span style="color:#A6ACCD;">\\x92\\xed\\xdc\\xbe</span><span style="color:#C3E88D;">&#39;(</span><span style="color:#A6ACCD;">\\x8a</span><span style="color:#C3E88D;">5</span><span style="color:#A6ACCD;">\\xbf</span><span style="color:#C3E88D;">I</span><span style="color:#A6ACCD;">\\xc5</span><span style="color:#C3E88D;">/</span><span style="color:#A6ACCD;">\\x18\\x8a\\xfa\\x0b</span><span style="color:#C3E88D;">9y_+40</span><span style="color:#A6ACCD;">\\xd3\\xe3\\xbc\\xf2\\xd1\\xe6</span><span style="color:#C3E88D;">W</span><span style="color:#A6ACCD;">\\xec\\x98</span><span style="color:#C3E88D;">~</span><span style="color:#A6ACCD;">\\xca\\xa6</span><span style="color:#C3E88D;">1aB</span><span style="color:#A6ACCD;">\\x12\\x12</span><span style="color:#C3E88D;">sS</span><span style="color:#A6ACCD;">\\x8e</span><span style="color:#C3E88D;">7</span><span style="color:#A6ACCD;">\\xed\\xcd\\\\\\xb2\\xef</span><span style="color:#C3E88D;">X</span><span style="color:#A6ACCD;">\\x90\\xbc\\x9c\\xf3</span><span style="color:#C3E88D;"> mk;</span><span style="color:#A6ACCD;">\\xa2\\xbf\\x84</span><span style="color:#C3E88D;">T</span><span style="color:#A6ACCD;">\\x14\\x00\\x00\\x06</span><span style="color:#C3E88D;">&#39;</span><span style="color:#A6ACCD;">\\xc2</span><span style="color:#C3E88D;">Fz</span><span style="color:#A6ACCD;">\\xf1\\x00\\x08\\xbd\\xc8\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\xaa</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div><h3 id="build-a-cell-from-a-message" tabindex="-1">Build a Cell from a Message <a class="header-anchor" href="#build-a-cell-from-a-message" aria-label="Permalink to &quot;Build a Cell from a Message&quot;">​</a></h3><p>To build a cell from a <code>Message</code> object, use the <code>build_cell</code> method.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Build a cell from the message</span></span>
<span class="line"><span style="color:#A6ACCD;">cell </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">build_cell</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">cell</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="result-5" tabindex="-1">Result: <a class="header-anchor" href="#result-5" aria-label="Permalink to &quot;Result:&quot;">​</a></h4><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Cell repr_hash</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dcbfbbce5aecdb9a486b8009e5f193f8bc7006455643e7ed83044afabe5cb8f2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> bits</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1014</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> refs</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h2 id="checking-types" tabindex="-1">Checking Types <a class="header-anchor" href="#checking-types" aria-label="Permalink to &quot;Checking Types&quot;">​</a></h2><p>You can check the type of a message using the following properties:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Check if a message is an external inbound message</span></span>
<span class="line"><span style="color:#A6ACCD;">is_external_in </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">is_external_in</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Check if a message is an external outbound message</span></span>
<span class="line"><span style="color:#A6ACCD;">is_external_out </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">is_external_out</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Check if a message is an internal message</span></span>
<span class="line"><span style="color:#A6ACCD;">is_internal </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">is_internal</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">is_external_in</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">is_external_out</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">is_internal</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="result-6" tabindex="-1">Result: <a class="header-anchor" href="#result-6" aria-label="Permalink to &quot;Result:&quot;">​</a></h4><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">True</span></span>
<span class="line"><span style="color:#89DDFF;">False</span></span>
<span class="line"><span style="color:#89DDFF;">False</span></span></code></pre></div><h2 id="message-headers" tabindex="-1">Message Headers <a class="header-anchor" href="#message-headers" aria-label="Permalink to &quot;Message Headers&quot;">​</a></h2><p>Message headers contain essential information about the message, such as the source and destination addresses, the value attached to the message, and more.</p><h3 id="accessing-headers" tabindex="-1">Accessing Headers <a class="header-anchor" href="#accessing-headers" aria-label="Permalink to &quot;Accessing Headers&quot;">​</a></h3><p>You can access the header of a message using the <code>header</code> property:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Get the header of a message</span></span>
<span class="line"><span style="color:#A6ACCD;">header </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> message</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">header</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Get the type of the message from the header</span></span>
<span class="line"><span style="color:#A6ACCD;">message_type </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> header</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">type</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">header</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">message_type</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h4 id="result-7" tabindex="-1">Result: <a class="header-anchor" href="#result-7" aria-label="Permalink to &quot;Result:&quot;">​</a></h4><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">builtins</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ExternalInMessageHeader</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">object</span><span style="color:#A6ACCD;"> at </span><span style="color:#C792EA;">0x</span><span style="color:#F78C6C;">101c224f0</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ExternalIn</span></span></code></pre></div><h3 id="header-properties" tabindex="-1">Header Properties <a class="header-anchor" href="#header-properties" aria-label="Permalink to &quot;Header Properties&quot;">​</a></h3><p>Depending on the type of the message, you can access more information from the header.</p><h4 id="internal-messages" tabindex="-1">Internal Messages <a class="header-anchor" href="#internal-messages" aria-label="Permalink to &quot;Internal Messages&quot;">​</a></h4><p>For internal messages, you can access the following properties:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ihr_disabled </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> header</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ihr_disabled</span></span>
<span class="line"><span style="color:#A6ACCD;">bounce </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> header</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">bounce</span></span>
<span class="line"><span style="color:#A6ACCD;">bounced </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> header</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">bounced</span></span>
<span class="line"><span style="color:#A6ACCD;">src </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> header</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">src</span></span>
<span class="line"><span style="color:#A6ACCD;">dst </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> header</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">dst</span></span>
<span class="line"><span style="color:#A6ACCD;">value </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> header</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">value</span></span>
<span class="line"><span style="color:#A6ACCD;">ihr_fee </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> header</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ihr_fee</span></span>
<span class="line"><span style="color:#A6ACCD;">fwd_fee </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> header</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">fwd_fee</span></span>
<span class="line"><span style="color:#A6ACCD;">created_at </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> header</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">created_at</span></span>
<span class="line"><span style="color:#A6ACCD;">created_lt </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> header</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">created_lt</span></span></code></pre></div><h5 id="result-8" tabindex="-1">Result: <a class="header-anchor" href="#result-8" aria-label="Permalink to &quot;Result:&quot;">​</a></h5><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">True</span></span>
<span class="line"><span style="color:#89DDFF;">True</span></span>
<span class="line"><span style="color:#89DDFF;">False</span></span>
<span class="line"><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">3c9893fce0c401e7890eec6599c0b79be25314299ec47a9e78627c42e947d792</span></span>
<span class="line"><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">06c404998bb4a6f5cfe465939e3e3562ed573e27f7906355b1a9e1cf61f5ba2e</span></span>
<span class="line"><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#F78C6C;">0.000333336</span></span>
<span class="line"><span style="color:#F78C6C;">1694222262</span></span>
<span class="line"><span style="color:#F78C6C;">21376022000002</span></span></code></pre></div><h4 id="external-inbound-messages" tabindex="-1">External Inbound Messages <a class="header-anchor" href="#external-inbound-messages" aria-label="Permalink to &quot;External Inbound Messages&quot;">​</a></h4><p>For external inbound messages, you can access the following properties:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">dst </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> header</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">dst</span></span>
<span class="line"><span style="color:#A6ACCD;">import_fee </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> header</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">import_fee</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">dst</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">import_fee</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h5 id="result-9" tabindex="-1">Result: <a class="header-anchor" href="#result-9" aria-label="Permalink to &quot;Result:&quot;">​</a></h5><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">06c404998bb4a6f5cfe465939e3e3562ed573e27f7906355b1a9e1cf61f5ba2e</span></span>
<span class="line"><span style="color:#F78C6C;">0</span></span></code></pre></div><h4 id="external-outbound-messages" tabindex="-1">External Outbound Messages <a class="header-anchor" href="#external-outbound-messages" aria-label="Permalink to &quot;External Outbound Messages&quot;">​</a></h4><p>For external outbound messages, you can access the following properties:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">src </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> header</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">src</span></span>
<span class="line"><span style="color:#A6ACCD;">created_at </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> header</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">created_at</span></span>
<span class="line"><span style="color:#A6ACCD;">created_lt </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> header</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">created_lt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">src</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">created_at</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">created_lt</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h5 id="result-10" tabindex="-1">Result: <a class="header-anchor" href="#result-10" aria-label="Permalink to &quot;Result:&quot;">​</a></h5><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">06c404998bb4a6f5cfe465939e3e3562ed573e27f7906355b1a9e1cf61f5ba2e</span></span>
<span class="line"><span style="color:#F78C6C;">1694222262</span></span>
<span class="line"><span style="color:#F78C6C;">21376022000004</span></span></code></pre></div><h2 id="unsigned-external-message" tabindex="-1">Unsigned External Message <a class="header-anchor" href="#unsigned-external-message" aria-label="Permalink to &quot;Unsigned External Message&quot;">​</a></h2><p>An <code>UnsignedExternalMessage</code> represents an external message before it&#39;s signed. It provides a structured way to manage and manipulate messages before they are signed and sent to smart contracts.</p><h3 id="properties-of-an-unsigned-external-message" tabindex="-1">Properties of an Unsigned External Message <a class="header-anchor" href="#properties-of-an-unsigned-external-message" aria-label="Permalink to &quot;Properties of an Unsigned External Message&quot;">​</a></h3><h4 id="hash" tabindex="-1">Hash <a class="header-anchor" href="#hash" aria-label="Permalink to &quot;Hash&quot;">​</a></h4><p>The <code>hash</code> property returns the hash of the message.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Get the hash of the unsigned message</span></span>
<span class="line"><span style="color:#82AAFF;">hash</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> unsigned_message</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">hash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">hash</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h5 id="result-11" tabindex="-1">Result: <a class="header-anchor" href="#result-11" aria-label="Permalink to &quot;Result:&quot;">​</a></h5><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">b</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">{</span><span style="color:#A6ACCD;">\\x9f\\xf0\\xab</span><span style="color:#C3E88D;">8</span><span style="color:#A6ACCD;">\\xd4</span><span style="color:#C3E88D;">G</span><span style="color:#A6ACCD;">\\xf7\\xc9\\xed</span><span style="color:#C3E88D;">TV</span><span style="color:#A6ACCD;">\\x97</span><span style="color:#C3E88D;">//</span><span style="color:#A6ACCD;">\\xb4\\x05</span><span style="color:#C3E88D;">o</span><span style="color:#A6ACCD;">\\xc0\\x9e</span><span style="color:#C3E88D;">S</span><span style="color:#A6ACCD;">\\xed</span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;">\\x81\\xb2</span><span style="color:#C3E88D;">4</span><span style="color:#A6ACCD;">\\x86</span><span style="color:#C3E88D;">I</span><span style="color:#A6ACCD;">\\xf0\\xe3\\x10\\xf1</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><h4 id="expiration-time" tabindex="-1">Expiration Time <a class="header-anchor" href="#expiration-time" aria-label="Permalink to &quot;Expiration Time&quot;">​</a></h4><p>The <code>expire_at</code> property returns the expiration unix timestamp of the message.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Get the expiration time of the unsigned message</span></span>
<span class="line"><span style="color:#A6ACCD;">expire_at </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> unsigned_message</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">expire_at</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">expire_at</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 1695429486</span></span></code></pre></div><h3 id="signing-an-unsigned-external-message" tabindex="-1">Signing an Unsigned External Message <a class="header-anchor" href="#signing-an-unsigned-external-message" aria-label="Permalink to &quot;Signing an Unsigned External Message&quot;">​</a></h3><p>The <code>sign</code> method allows you to sign an unsigned external message. This requires a <code>KeyPair</code> and an optional <code>signature_id</code>.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Sign the unsigned message</span></span>
<span class="line"><span style="color:#A6ACCD;">signed_message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> unsigned_message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sign</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">keypair</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> signature_id</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">signed_message</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h5 id="result-12" tabindex="-1">Result: <a class="header-anchor" href="#result-12" aria-label="Permalink to &quot;Result:&quot;">​</a></h5><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">SignedExternalMessage </span><span style="color:#82AAFF;">hash</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">6bddfe073564fe7439f3132c21be0d436c4a98638d8d28e35052237b1393e1d1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> expire_at</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1695429300</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ExternalIn</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h3 id="inserting-a-signature" tabindex="-1">Inserting a Signature <a class="header-anchor" href="#inserting-a-signature" aria-label="Permalink to &quot;Inserting a Signature&quot;">​</a></h3><p>The <code>with_signature</code> method allows you to insert a signature into the body of the message. This requires a valid <code>ed25519</code> signature as the parameter.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Create a signature</span></span>
<span class="line"><span style="color:#A6ACCD;">signature </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> keypair</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sign_raw</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">unsigned_message</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">hash</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Insert a signature into the body of the message</span></span>
<span class="line"><span style="color:#A6ACCD;">signed_message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> unsigned_message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">with_signature</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">signed_message</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h5 id="result-13" tabindex="-1">Result: <a class="header-anchor" href="#result-13" aria-label="Permalink to &quot;Result:&quot;">​</a></h5><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">SignedExternalMessage </span><span style="color:#82AAFF;">hash</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">6bddfe073564fe7439f3132c21be0d436c4a98638d8d28e35052237b1393e1d1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> expire_at</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1695429300</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ExternalIn</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h3 id="inserting-a-fake-signature" tabindex="-1">Inserting a Fake Signature <a class="header-anchor" href="#inserting-a-fake-signature" aria-label="Permalink to &quot;Inserting a Fake Signature&quot;">​</a></h3><p>The <code>with_fake_signature</code> method allows you to insert a fake signature into the body of the message. This method does not require any parameters.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Insert a fake signature into the body of the message</span></span>
<span class="line"><span style="color:#A6ACCD;">signed_message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> unsigned_message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">with_fake_signature</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">signed_message</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h5 id="result-14" tabindex="-1">Result: <a class="header-anchor" href="#result-14" aria-label="Permalink to &quot;Result:&quot;">​</a></h5><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">SignedExternalMessage </span><span style="color:#82AAFF;">hash</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">b8996a7f99e77e5c3dac9bfdf109d5c61dc83dde17fbc97809903c6f2102335b</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> expire_at</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1695429300</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ExternalIn</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This method is useful for testing purposes when you need to create a signed message but the validity of the signature is not important.</p></div><h3 id="creating-a-message-without-a-signature" tabindex="-1">Creating a Message Without a Signature <a class="header-anchor" href="#creating-a-message-without-a-signature" aria-label="Permalink to &quot;Creating a Message Without a Signature&quot;">​</a></h3><p>The <code>without_signature</code> method allows you to create a message without a signature. This method does not require any parameters.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Create a message without a signature</span></span>
<span class="line"><span style="color:#A6ACCD;">signed_message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> unsigned_message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">without_signature</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">without_signature_message</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h5 id="result-15" tabindex="-1">Result: <a class="header-anchor" href="#result-15" aria-label="Permalink to &quot;Result:&quot;">​</a></h5><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">SignedExternalMessage </span><span style="color:#82AAFF;">hash</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">46c8f90a137f5141a2d8c8157878d36cec4f47f281f4fa2865c856738674fa6c</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> expire_at</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1695429300</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ExternalIn</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h2 id="unsigned-message-body" tabindex="-1">Unsigned Message Body <a class="header-anchor" href="#unsigned-message-body" aria-label="Permalink to &quot;Unsigned Message Body&quot;">​</a></h2><h3 id="signing-the-external-message-body" tabindex="-1">Signing the External Message Body <a class="header-anchor" href="#signing-the-external-message-body" aria-label="Permalink to &quot;Signing the External Message Body&quot;">​</a></h3><p>The <code>sign</code> method of the <code>UnsignedBody</code> class allows you to sign the body of an external message. This requires a <code>KeyPair</code> and an optional <code>signature_id</code>.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Sign the body of the unsigned message</span></span>
<span class="line"><span style="color:#A6ACCD;">signed_body </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> unsigned_body</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sign</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">keypair</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> signature_id</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">signed_body</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h5 id="result-16" tabindex="-1">Result: <a class="header-anchor" href="#result-16" aria-label="Permalink to &quot;Result:&quot;">​</a></h5><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Cell repr_hash</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">d35449d816f78e69cae9a447fa00097468a84272d1a4480d92cd7e071355318b</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> bits</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">737</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> refs</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h3 id="inserting-a-signature-1" tabindex="-1">Inserting a Signature <a class="header-anchor" href="#inserting-a-signature-1" aria-label="Permalink to &quot;Inserting a Signature&quot;">​</a></h3><p>The <code>with_signature</code> method allows you to insert a signature into the body of the message. This requires a valid <code>ed25519</code> signature as the parameter.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Insert a signature into the body of the message</span></span>
<span class="line"><span style="color:#A6ACCD;">signed_body </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> unsigned_body</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">with_signature</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">signed_body</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h5 id="result-17" tabindex="-1">Result: <a class="header-anchor" href="#result-17" aria-label="Permalink to &quot;Result:&quot;">​</a></h5><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Cell repr_hash</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">d35449d816f78e69cae9a447fa00097468a84272d1a4480d92cd7e071355318b</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> bits</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">737</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> refs</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h3 id="inserting-a-fake-signature-1" tabindex="-1">Inserting a Fake Signature <a class="header-anchor" href="#inserting-a-fake-signature-1" aria-label="Permalink to &quot;Inserting a Fake Signature&quot;">​</a></h3><p>The <code>with_fake_signature</code> method allows you to insert a fake signature into the body of the message. This method does not require any parameters.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Insert a fake signature into the body of the message</span></span>
<span class="line"><span style="color:#A6ACCD;">signed_body </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> unsigned_body</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">with_fake_signature</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">signed_body</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h5 id="result-18" tabindex="-1">Result: <a class="header-anchor" href="#result-18" aria-label="Permalink to &quot;Result:&quot;">​</a></h5><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Cell repr_hash</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cd620bb427b5a0662cffccad9015558e5ed236226bc389f6a3b1183a738ad820</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> bits</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">737</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> refs</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This method is useful for testing purposes when you need to create a signed message body but the validity of the signature is not important.</p></div><h3 id="creating-a-message-body-without-a-signature" tabindex="-1">Creating a Message Body Without a Signature <a class="header-anchor" href="#creating-a-message-body-without-a-signature" aria-label="Permalink to &quot;Creating a Message Body Without a Signature&quot;">​</a></h3><p>The <code>without_signature</code> method allows you to create a message body without a signature. This method does not require any parameters.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Create a message body without a signature</span></span>
<span class="line"><span style="color:#A6ACCD;">signed_body </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> unsigned_body</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">without_signature</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">signed_body</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h5 id="result-19" tabindex="-1">Result: <a class="header-anchor" href="#result-19" aria-label="Permalink to &quot;Result:&quot;">​</a></h5><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Cell repr_hash</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">fdf652f24c10b6b8e765c6f6bfac82681190f17274ff492647dcd4be76e7eb1a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> bits</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">225</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> refs</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h3 id="internal-message-body" tabindex="-1">Internal Message Body <a class="header-anchor" href="#internal-message-body" aria-label="Permalink to &quot;Internal Message Body&quot;">​</a></h3><p>While the <code>UnsignedBody</code> class is used for external message bodies, an internal message body is represented as a <code>Cell</code>. A <code>Cell</code> can be passed into an external message body.</p><p>This is useful in the following situations:</p><ol><li><p>To create an internal message for a local executor. This is helpful when you need to evaluate a specific part of a chain in isolation or for testing purposes.</p></li><li><p>For contracts that simply forward the received <code>Cell</code> with the message. For example, in EverWallet, there is a separate method that can send up to four messages in this way.</p></li></ol><p>You can create, manipulate, and evaluate <code>Cell</code> instances using the methods provided in the client libraries. However, unlike <code>UnsignedBody</code>, a <code>Cell</code> doesn&#39;t need to be signed or carry a signature because it&#39;s meant for internal use and not for external validation.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Please consult ourguide on <a href="./working-with-cells.html"><strong>Working With Cells</strong></a> for detailed instructions on how to manipulate <code>Cell</code> instances for internal message bodies</p></div><h2 id="signed-external-messages" tabindex="-1">Signed External Messages <a class="header-anchor" href="#signed-external-messages" aria-label="Permalink to &quot;Signed External Messages&quot;">​</a></h2><p>A <code>SignedExternalMessage</code> represents an external message after it&#39;s signed.</p><h3 id="properties-of-a-signed-external-message" tabindex="-1">Properties of a Signed External Message <a class="header-anchor" href="#properties-of-a-signed-external-message" aria-label="Permalink to &quot;Properties of a Signed External Message&quot;">​</a></h3><h4 id="hash-1" tabindex="-1">Hash <a class="header-anchor" href="#hash-1" aria-label="Permalink to &quot;Hash&quot;">​</a></h4><p>The <code>hash</code> property returns the hash of the message.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Get the hash of the signed message</span></span>
<span class="line"><span style="color:#82AAFF;">hash</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> signed_message</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">hash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">hash</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h5 id="result-20" tabindex="-1">Result: <a class="header-anchor" href="#result-20" aria-label="Permalink to &quot;Result:&quot;">​</a></h5><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">b</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\\xc7\\xc3\\xa4</span><span style="color:#C3E88D;"> @</span><span style="color:#A6ACCD;">\\x0f\\xdf\\xc6</span><span style="color:#C3E88D;">#</span><span style="color:#A6ACCD;">\\xd8\\x1c\\\\\\xdd\\x0e\\xd7\\x0f\\x01\\x9f\\x18</span><span style="color:#C3E88D;">M</span><span style="color:#A6ACCD;">\\xe5</span><span style="color:#C3E88D;">3</span><span style="color:#A6ACCD;">\\xa8\\x94\\xcc\\x8f</span><span style="color:#C3E88D;">$</span><span style="color:#A6ACCD;">\\x10</span><span style="color:#C3E88D;">&#39;</span><span style="color:#A6ACCD;">\\xd5\\x95\\xd5</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div><h4 id="expiration-time-1" tabindex="-1">Expiration Time <a class="header-anchor" href="#expiration-time-1" aria-label="Permalink to &quot;Expiration Time&quot;">​</a></h4><p>The <code>expire_at</code> property returns the expiration unix timestamp of the message.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Get the expiration time of the signed message</span></span>
<span class="line"><span style="color:#A6ACCD;">expire_at </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> signed_message</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">expire_at</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">expire_at</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 1695429300</span></span></code></pre></div><h3 id="splitting-a-signed-message" tabindex="-1">Splitting a Signed Message <a class="header-anchor" href="#splitting-a-signed-message" aria-label="Permalink to &quot;Splitting a Signed Message&quot;">​</a></h3><p>The <code>split</code> method allows split into inner message and expiration timestamp.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Split the signed message</span></span>
<span class="line"><span style="color:#A6ACCD;">inner_message</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> expire_at </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> signed_message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">inner_message</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">expire_at</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h5 id="result-21" tabindex="-1">Result: <a class="header-anchor" href="#result-21" aria-label="Permalink to &quot;Result:&quot;">​</a></h5><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Message </span><span style="color:#82AAFF;">hash</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2db0a84737948e6ea62108e9a152ee08e00adfed8c2504fadfc530d54918f40f</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ExternalIn</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F78C6C;">1695429300</span></span></code></pre></div>`,147),p=[o];function t(c,r,i,y,d,D){return a(),e("div",null,p)}const g=s(l,[["render",t]]);export{h as __pageData,g as default};
